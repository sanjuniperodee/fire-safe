# üöÄ Qorgau City - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è. –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
```bash
git clone <repository-url>
cd qorgau-city
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –ö–æ–ø–∏—Ä—É–µ–º –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp docker/example.env docker/.env

# –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ docker/.env
```

### 3. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose up -d

# –°–ª–µ–¥–∏–º –∑–∞ –ª–æ–≥–∞–º–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
docker-compose logs -f app_backend
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
- **Backend API**: http://localhost:3000
- **WebSocket**: ws://localhost:3001
- **MinIO Console**: http://localhost:9001
- **Admin Panel**: http://localhost:3000/admin/

## üîë –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### üë§ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã
- **–¢–µ–ª–µ—Ñ–æ–Ω**: `+77758489538`
- **–ü–∞—Ä–æ–ª—å**: `u4DwQw04`
- **Email**: `admin@qorgau.kz`
- **–†–æ–ª–∏**: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä, –°—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

### üë®‚Äçüíº –ò–Ω—Å–ø–µ–∫—Ç–æ—Ä—ã –ø–æ –≥–æ—Ä–æ–¥–∞–º

| –ì–æ—Ä–æ–¥ | –¢–µ–ª–µ—Ñ–æ–Ω | –ü–∞—Ä–æ–ª—å | Email |
|-------|---------|--------|-------|
| –ê–ª–º–∞—Ç—ã | +77758481001 | inspector01 | inspector.–∞–ª–º–∞—Ç—ã@qorgau.kz |
| –ù—É—Ä-–°—É–ª—Ç–∞–Ω | +77758481002 | inspector02 | inspector.–Ω—É—Ä-—Å—É–ª—Ç–∞–Ω@qorgau.kz |
| –®—ã–º–∫–µ–Ω—Ç | +77758481003 | inspector03 | inspector.—à—ã–º–∫–µ–Ω—Ç@qorgau.kz |
| –ê–∫—Ç–æ–±–µ | +77758481004 | inspector04 | inspector.–∞–∫—Ç–æ–±–µ@qorgau.kz |
| –¢–∞—Ä–∞–∑ | +77758481005 | inspector05 | inspector.—Ç–∞—Ä–∞–∑@qorgau.kz |
| –ü–∞–≤–ª–æ–¥–∞—Ä | +77758481006 | inspector06 | inspector.–ø–∞–≤–ª–æ–¥–∞—Ä@qorgau.kz |
| –£—Å—Ç—å-–ö–∞–º–µ–Ω–æ–≥–æ—Ä—Å–∫ | +77758481007 | inspector07 | inspector.—É—Å—Ç—å-–∫–∞–º–µ–Ω–æ–≥–æ—Ä—Å–∫@qorgau.kz |
| –°–µ–º–µ–π | +77758481008 | inspector08 | inspector.—Å–µ–º–µ–π@qorgau.kz |
| –ê—Ç—ã—Ä–∞—É | +77758481009 | inspector09 | inspector.–∞—Ç—ã—Ä–∞—É@qorgau.kz |
| –ö–æ—Å—Ç–∞–Ω–∞–π | +77758481010 | inspector10 | inspector.–∫–æ—Å—Ç–∞–Ω–∞–π@qorgau.kz |
| –ö—ã–∑—ã–ª–æ—Ä–¥–∞ | +77758481011 | inspector11 | inspector.–∫—ã–∑—ã–ª–æ—Ä–¥–∞@qorgau.kz |
| –£—Ä–∞–ª—å—Å–∫ | +77758481012 | inspector12 | inspector.—É—Ä–∞–ª—å—Å–∫@qorgau.kz |
| –ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫ | +77758481013 | inspector13 | inspector.–ø–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫@qorgau.kz |
| –ê–∫—Ç–∞—É | +77758481014 | inspector14 | inspector.–∞–∫—Ç–∞—É@qorgau.kz |
| –¢–µ–º–∏—Ä—Ç–∞—É | +77758481015 | inspector15 | inspector.—Ç–µ–º–∏—Ä—Ç–∞—É@qorgau.kz |

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –°–µ—Ä–≤–∏—Å—ã
- **app_backend** (–ø–æ—Ä—Ç 3000) - Django REST API
- **websocket_server** (–ø–æ—Ä—Ç 3001) - WebSocket —Å–µ—Ä–≤–µ—Ä –¥–ª—è —á–∞—Ç–æ–≤
- **database_backend** (–ø–æ—Ä—Ç 5432) - PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **redis_backend** (–ø–æ—Ä—Ç 6380) - Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ Celery
- **minio** (–ø–æ—Ä—Ç—ã 9000/9001) - MinIO –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤
- **celery_worker** - –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
- **celery_beat** - –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è:
- ‚úÖ 4 —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–ê–¥–º–∏–Ω, –ò–Ω—Å–ø–µ–∫—Ç–æ—Ä, –ü–æ—Å—Ç–∞–≤—â–∏–∫, –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
- ‚úÖ 15 –≥–æ—Ä–æ–¥–æ–≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞
- ‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ 15 –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–æ–≤ (–ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ –∫–∞–∂–¥—ã–π –≥–æ—Ä–æ–¥)
- ‚úÖ 26 —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–∞—Å–ø–æ—Ä—Ç–æ–≤ –∑–¥–∞–Ω–∏–π
- ‚úÖ 225+ –∫–ª—é—á–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ –ö–æ—Ä–∑–∏–Ω—ã MinIO (isec, public, static)

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `docker/.env`:
```env
# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
DEBUG=0
SECRET_KEY=your-super-secret-key-here

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
POSTGRES_DB=qorgau_city_prod
POSTGRES_USER=qorgau_user
POSTGRES_PASSWORD=super-secure-password

# MinIO
MINIO_ACCESS_KEY=your-minio-access-key
MINIO_SECRET_KEY=your-minio-secret-key

# –î–æ–º–µ–Ω
ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com
CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
```

### 2. Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```nginx
server {
    listen 80;
    server_name yourdomain.com;

    # API
    location /api/ {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    # WebSocket
    location /ws/ {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
    }

    # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
    location /static/ {
        alias /path/to/qorgau-city/staticfiles/;
    }

    # Frontend
    location / {
        root /path/to/qorgau-city-front/dist;
        try_files $uri $uri/ /index.html;
    }
}
```

### 3. SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
```bash
# Certbot –¥–ª—è Let's Encrypt
sudo certbot --nginx -d yourdomain.com
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
docker-compose down -v
docker-compose up -d database_backend
docker-compose up app_backend
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å MinIO
```bash
# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∫–æ—Ä–∑–∏–Ω—ã
docker-compose up createbuckets
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
```bash
# –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é
docker-compose exec app_backend python manage.py migrate
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
```bash
# –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
docker-compose exec app_backend python manage.py init_project
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å WebSocket
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å WebSocket —Å–µ—Ä–≤–µ—Ä
docker-compose logs websocket_server
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
docker-compose ps
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
# –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose logs -f

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
docker-compose logs -f app_backend
docker-compose logs -f websocket_server
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
docker-compose exec database_backend psql -U postgres -d qorgau_city -c "
SELECT 
    (SELECT COUNT(*) FROM auths_userrole) as roles,
    (SELECT COUNT(*) FROM auths_city) as cities,
    (SELECT COUNT(*) FROM auths_customuser) as users,
    (SELECT COUNT(*) FROM objects_document) as documents,
    (SELECT COUNT(*) FROM objects_documentkey) as document_keys,
    (SELECT COUNT(*) FROM chats_chatroom) as chat_rooms,
    (SELECT COUNT(*) FROM chats_message) as messages;
"
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
```bash
git pull origin main
docker-compose build
docker-compose up -d
```

### 2. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π
```bash
docker-compose exec app_backend python manage.py migrate
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
```bash
docker-compose exec app_backend python manage.py collectstatic --noinput
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–æ—Ä—Ç—ã —Å–≤–æ–±–æ–¥–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `docker/.env`
4. –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã `docker-compose up -d`!** üéâ 